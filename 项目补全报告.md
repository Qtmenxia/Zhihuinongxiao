# æ™ºå†œé“¾é”€é¡¹ç›®è¡¥å…¨æŠ¥å‘Š

**æ£€æŸ¥æ—¥æœŸ**: 2026-01-24  
**é¡¹ç›®çŠ¶æ€**: åŸºæœ¬å®Œæ•´ï¼Œå¯è¿›è¡Œå¼€å‘æµ‹è¯•

---

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| ç±»å‹ | æ–‡ä»¶æ•°é‡ | çŠ¶æ€ |
|------|----------|------|
| åç«¯Pythonæ–‡ä»¶ | 76 | âœ… å®Œæ•´ |
| å‰ç«¯Vue/JSæ–‡ä»¶ | 24 | âœ… æ–°å»ºå®Œæˆ |
| é…ç½®æ–‡ä»¶ | 8 | âœ… å®Œæ•´ |
| æ–‡æ¡£æ–‡ä»¶ | 4 | âœ… å®Œæ•´ |

---

## âœ… å·²å®Œæˆçš„æ¨¡å—

### åç«¯ (backend/)

| æ¨¡å— | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| **APIä¸»å…¥å£** | `api/main.py` | FastAPIåº”ç”¨ã€è·¯ç”±æ³¨å†Œã€WebSocketæ”¯æŒ |
| **è·¯ç”±å±‚** | `api/routers/*.py` | æœåŠ¡ç”Ÿæˆã€å†œæˆ·ã€äº§å“ã€è®¢å•ã€ç»Ÿè®¡ 5ä¸ªè·¯ç”± |
| **æ•°æ®æ¨¡å‹** | `models/*.py` | Farmer, Product, Order, MCPService, ServiceLog |
| **æœåŠ¡å±‚** | `services/*.py` | ServiceManager, DeploymentService, CostCalculator, QualityMonitor |
| **æ•°æ®åº“** | `database/connection.py` | å¼‚æ­¥PostgreSQL + Redisæ”¯æŒ |
| **é…ç½®** | `config/settings.py` | ç¯å¢ƒå˜é‡ç®¡ç† |
| **è„šæœ¬** | `scripts/init_db.py` | æ•°æ®åº“åˆå§‹åŒ– |
| **è„šæœ¬** | `scripts/worker_daemon.py` | åå°ä»»åŠ¡å®ˆæŠ¤è¿›ç¨‹ |

### MCPybarraæ ¸å¿ƒ (backend/mcpybarra_core/)

| ç»„ä»¶ | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| **å·¥ä½œæµå›¾** | `graph.py` | LangGraphçŠ¶æ€æœºå®šä¹‰ |
| **çŠ¶æ€å®šä¹‰** | `state.py` | MCPWorkflowState |
| **LLMé…ç½®** | `config.py` | å¤šæ¨¡å‹æ”¯æŒ(Gemini/GPT/Qwen/DeepSeek) |
| **èŠ‚ç‚¹** | `nodes/*.py` | input_loader, swe_generator, server_tester, code_refinerç­‰ |
| **é€‚é…å™¨** | `adapters/*.py` | MCPå®¢æˆ·ç«¯é€‚é…å™¨ |
| **å·¥å…·** | `tool/*.py` | Tavilyæœç´¢ã€æ–‡ä»¶æ“ä½œã€Context7æ–‡æ¡£ |
| **æç¤ºè¯** | `prompts/*.prompt` | Planning, Coding, Testingé˜¶æ®µæç¤ºè¯ |

### å‰ç«¯ (frontend/farmer-admin/)

| ç»„ä»¶ | æ–‡ä»¶ | è¯´æ˜ |
|------|------|------|
| **å…¥å£** | `main.js`, `App.vue` | Vue3åº”ç”¨å…¥å£ |
| **è·¯ç”±** | `router/index.js` | å®Œæ•´è·¯ç”±é…ç½® |
| **å¸ƒå±€** | `layout/index.vue` | ä¾§è¾¹æ +é¡¶æ å¸ƒå±€ |
| **çŠ¶æ€** | `store/user.js` | Piniaç”¨æˆ·çŠ¶æ€ç®¡ç† |
| **API** | `api/*.js` | è¯·æ±‚å°è£…ã€ç”¨æˆ·APIã€æœåŠ¡API |
| **ç™»å½•** | `views/login/index.vue` | ç™»å½•é¡µé¢ |
| **å·¥ä½œå°** | `views/dashboard/index.vue` | æ•°æ®ç»Ÿè®¡ä»ªè¡¨ç›˜ |
| **æœåŠ¡ç”Ÿæˆ** | `views/service/generate.vue` | **æ ¸å¿ƒåŠŸèƒ½** - AIæœåŠ¡ç”Ÿæˆç•Œé¢ |
| **æœåŠ¡åˆ—è¡¨** | `views/service/list.vue` | æœåŠ¡ç®¡ç†åˆ—è¡¨ |
| **æœåŠ¡è¯¦æƒ…** | `views/service/detail.vue` | æœåŠ¡ä»£ç æŸ¥çœ‹ã€éƒ¨ç½² |

---

## âš ï¸ éœ€è¦æ³¨æ„çš„é—®é¢˜

### 1. MCPybarraå¯¼å…¥è·¯å¾„
- **é—®é¢˜**: åŸæ¡†æ¶ä½¿ç”¨ `from mcp_swe_flow.xxx` å¯¼å…¥
- **è§£å†³**: å·²åœ¨ `mcpybarra_core/__init__.py` ä¸­æ·»åŠ è·¯å¾„é…ç½®
- **å»ºè®®**: é¦–æ¬¡è¿è¡Œå‰ç¡®ä¿å¯¼å…¥è¯¥æ¨¡å—

### 2. LLM APIå¯†é’¥é…ç½®
- **å¿…é¡»**: è‡³å°‘é…ç½®ä¸€ä¸ªLLMæä¾›å•†çš„APIå¯†é’¥
- **æ¨è**: Gemini 2.5 Pro (å…è´¹é¢åº¦å¤§)
- **é…ç½®æ–‡ä»¶**: `backend/.env` (ä» `.env.example` å¤åˆ¶)

### 3. å‰ç«¯é¡µé¢å ä½
ä»¥ä¸‹é¡µé¢ä¸ºåŠŸèƒ½å ä½ï¼Œéœ€è¦åç»­å®Œå–„ï¼š
- `views/product/list.vue` - äº§å“åˆ—è¡¨
- `views/product/edit.vue` - äº§å“ç¼–è¾‘
- `views/order/list.vue` - è®¢å•åˆ—è¡¨
- `views/order/detail.vue` - è®¢å•è¯¦æƒ…
- `views/statistics/overview.vue` - æ•°æ®æ¦‚è§ˆ
- `views/statistics/cost.vue` - æˆæœ¬åˆ†æ
- `views/settings/index.vue` - ç³»ç»Ÿè®¾ç½®

---

## ğŸš€ å¯åŠ¨æŒ‡å—

### 1. åç«¯å¯åŠ¨

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# å¤åˆ¶ç¯å¢ƒé…ç½®
cp .env.example .env
# ç¼–è¾‘ .env å¡«å†™æ•°æ®åº“å¯†ç å’ŒLLM APIå¯†é’¥

# å¯åŠ¨æ•°æ®åº“ (Docker)
docker run -d --name zhinong-postgres \
  -e POSTGRES_DB=zhinong_db \
  -e POSTGRES_PASSWORD=your_password \
  -p 5432:5432 postgres:15-alpine

docker run -d --name zhinong-redis -p 6379:6379 redis:7-alpine

# åˆå§‹åŒ–æ•°æ®åº“
python -m backend.scripts.init_db

# å¯åŠ¨APIæœåŠ¡
uvicorn backend.api.main:app --reload --port 8000
```

### 2. å‰ç«¯å¯åŠ¨

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend/farmer-admin

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 3. è®¿é—®åœ°å€
- å‰ç«¯: http://localhost:3000
- APIæ–‡æ¡£: http://localhost:8000/docs
- æ¼”ç¤ºè´¦å·: `13800138000` / `demo123456`

---

## ğŸ“ æ–°å»º/ä¿®æ”¹çš„æ–‡ä»¶æ¸…å•

### æ–°å»ºæ–‡ä»¶
```
frontend/farmer-admin/
â”œâ”€â”€ package.json                    # npmé…ç½®
â”œâ”€â”€ vite.config.js                  # Viteé…ç½®
â”œâ”€â”€ index.html                      # HTMLå…¥å£
â”œâ”€â”€ public/favicon.svg              # ç½‘ç«™å›¾æ ‡
â””â”€â”€ src/
    â”œâ”€â”€ main.js                     # Vueå…¥å£
    â”œâ”€â”€ App.vue                     # æ ¹ç»„ä»¶
    â”œâ”€â”€ router/index.js             # è·¯ç”±é…ç½®
    â”œâ”€â”€ store/user.js               # ç”¨æˆ·çŠ¶æ€
    â”œâ”€â”€ api/
    â”‚   â”œâ”€â”€ request.js              # Axioså°è£…
    â”‚   â”œâ”€â”€ user.js                 # ç”¨æˆ·API
    â”‚   â””â”€â”€ service.js              # æœåŠ¡API
    â”œâ”€â”€ layout/index.vue            # å¸ƒå±€ç»„ä»¶
    â”œâ”€â”€ styles/index.scss           # å…¨å±€æ ·å¼
    â”œâ”€â”€ assets/logo.svg             # Logo
    â””â”€â”€ views/
        â”œâ”€â”€ login/index.vue         # ç™»å½•é¡µ
        â”œâ”€â”€ dashboard/index.vue     # å·¥ä½œå°
        â”œâ”€â”€ service/
        â”‚   â”œâ”€â”€ generate.vue        # æœåŠ¡ç”Ÿæˆ
        â”‚   â”œâ”€â”€ list.vue            # æœåŠ¡åˆ—è¡¨
        â”‚   â””â”€â”€ detail.vue          # æœåŠ¡è¯¦æƒ…
        â”œâ”€â”€ product/*.vue           # äº§å“é¡µ(å ä½)
        â”œâ”€â”€ order/*.vue             # è®¢å•é¡µ(å ä½)
        â”œâ”€â”€ statistics/*.vue        # ç»Ÿè®¡é¡µ(å ä½)
        â”œâ”€â”€ settings/index.vue      # è®¾ç½®é¡µ(å ä½)
        â””â”€â”€ error/404.vue           # 404é¡µ

backend/
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ __init__.py                 # æ¨¡å—åˆå§‹åŒ–
â”‚   â”œâ”€â”€ init_db.py                  # æ•°æ®åº“åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ worker_daemon.py            # Workerå®ˆæŠ¤è¿›ç¨‹
â””â”€â”€ mcpybarra_core/
    â””â”€â”€ __init__.py                 # è·¯å¾„é…ç½®(æ›´æ–°)
```

### ä¿®æ”¹æ–‡ä»¶
```
backend/services/quality_monitor.py  # æ·»åŠ check_service_qualityæ–¹æ³•
```

---

## ğŸ“ ä¸‹ä¸€æ­¥å»ºè®®

1. **æµ‹è¯•MCPybarraå·¥ä½œæµ**: ç¡®ä¿LLMè°ƒç”¨æ­£å¸¸
2. **å®Œå–„å‰ç«¯é¡µé¢**: è¡¥å…¨äº§å“ã€è®¢å•ã€ç»Ÿè®¡åŠŸèƒ½
3. **æ·»åŠ å•å…ƒæµ‹è¯•**: è¦†ç›–æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
4. **éƒ¨ç½²å‡†å¤‡**: å®Œå–„Docker Composeé…ç½®
5. **æ–‡æ¡£å®Œå–„**: è¡¥å……APIä½¿ç”¨è¯´æ˜

---

*æŠ¥å‘Šç”Ÿæˆæ—¶é—´: 2026-01-24*
