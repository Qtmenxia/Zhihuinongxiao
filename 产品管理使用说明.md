# 产品管理功能使用说明

## 已完成的功能

### 1. 产品列表页面 (`/product/list`)
- ✅ 搜索筛选（产品名称、分类、状态）
- ✅ 卡片式网格展示
- ✅ 产品信息展示（图片、价格、库存、规格等）
- ✅ 操作功能（编辑、上架/下架、删除）
- ✅ 分页功能
- ✅ 库存预警标识
- ✅ 精选产品标识

### 2. 添加/编辑产品页面 (`/product/add` 和 `/product/edit/:id`)

#### 基础信息
- ✅ 产品名称
- ✅ SKU编码（支持自动生成）
- ✅ 产品分类（可选择或自定义）
- ✅ 产品描述

#### 规格与定价
- ✅ 动态添加产品规格（如：枚数、规格、重量等）
- ✅ 售价设置
- ✅ 原价设置（用于显示折扣）

#### 库存管理
- ✅ 库存数量
- ✅ 库存预警阈值

#### 营销信息
- ✅ 目标场景（如：送礼/节日）
- ✅ 包装类型
- ✅ 产品卖点（支持多个标签）

#### 媒体资源
- ✅ **产品图片上传**（支持点击上传，JPG/PNG/GIF/WebP，最大10MB）
- ✅ 产品视频URL

#### 溯源信息（选填）
- ✅ 产地信息
- ✅ 种植方式
- ✅ 认证信息

### 3. 图片上传功能

#### 后端API
- `POST /api/v1/upload/images` - 上传单张图片
- `POST /api/v1/upload/images/batch` - 批量上传图片
- `POST /api/v1/upload/videos` - 上传视频
- `DELETE /api/v1/upload/files` - 删除文件
- `GET /uploads/images/{filename}` - 访问上传的图片

#### 图片存储
- 图片保存在：`uploads/images/` 目录
- 文件名格式：`YYYYMMDD_HHMMSS_随机ID.扩展名`
- 支持格式：JPG, JPEG, PNG, GIF, WebP
- 最大大小：10MB

## 使用步骤

### 添加产品

1. 访问产品列表页面：`http://localhost:3000/product/list`
2. 点击右上角"添加产品"按钮
3. 填写产品信息：
   - **基础信息**：输入产品名称、SKU（可点击"自动生成"）、选择分类
   - **规格**：添加产品规格，如"重量: 500g"、"枚数: 9"
   - **定价**：输入售价，可选填原价
   - **库存**：设置库存数量和预警阈值
   - **营销**：填写目标场景、包装类型、添加卖点标签
   - **图片**：点击上传按钮，选择图片文件上传
   - **溯源**：可选填产地、种植方式、认证信息
4. 点击"立即创建"按钮

### 编辑产品

1. 在产品列表中找到要编辑的产品
2. 点击"编辑"按钮
3. 修改产品信息
4. 点击"保存修改"按钮

### 图片上传说明

- **方式1**：点击上传区域的"上传图片"按钮，选择本地图片文件
- **支持格式**：JPG, PNG, GIF, WebP
- **文件大小**：单张最大10MB
- **建议尺寸**：800x800px
- **上传后**：图片会自动保存到服务器，并显示在产品图片列表中
- **删除图片**：点击图片上的删除按钮即可移除

## 注意事项

1. **SKU编码**：创建后不可修改，请谨慎填写或使用自动生成
2. **规格信息**：至少需要添加一个规格项
3. **图片上传**：
   - 图片会保存在服务器的 `uploads/images/` 目录
   - 确保后端服务有写入权限
   - 图片URL格式：`/uploads/images/文件名.jpg`
4. **原价设置**：如果填写原价，必须高于售价
5. **库存预警**：当库存低于预警阈值时，产品卡片会显示"库存预警"标签

## API端点

### 产品管理
- `GET /api/v1/products` - 获取产品列表
- `POST /api/v1/products` - 创建产品
- `GET /api/v1/products/{id}` - 获取产品详情
- `PUT /api/v1/products/{id}` - 更新产品
- `DELETE /api/v1/products/{id}` - 删除产品

### 文件上传
- `POST /api/v1/upload/images` - 上传图片
- `POST /api/v1/upload/images/batch` - 批量上传
- `DELETE /api/v1/upload/files?file_path=/uploads/images/xxx.jpg` - 删除文件

## 故障排查

### 无法创建产品
1. 检查所有必填字段是否已填写
2. 确保至少添加了一个规格项
3. 检查浏览器控制台是否有错误信息
4. 确认后端服务正在运行

### 图片上传失败
1. 检查图片格式是否支持（JPG/PNG/GIF/WebP）
2. 确认图片大小不超过10MB
3. 检查后端 `uploads/images/` 目录是否存在且有写入权限
4. 查看后端日志是否有错误信息

### 图片无法显示
1. 确认图片已成功上传（检查 `uploads/images/` 目录）
2. 检查图片URL是否正确
3. 确认后端静态文件服务已启用
4. 尝试直接访问图片URL：`http://localhost:8000/uploads/images/文件名.jpg`

## 下一步开发

- [ ] 批量上传图片
- [ ] 图片裁剪和压缩
- [ ] 拖拽排序图片
- [ ] 产品详情页面
- [ ] 产品导入/导出功能

